<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
    <title>Blobby Example 4</title>
    <script src="../build/blobby.min.js"></script>
    <script type="text/javascript">
    function draw(){
      var canvas = document.getElementById('thegraph');
      if (canvas.getContext){
        canvas.style.background = 'rgb(51,51,51)';
        var ctx = canvas.getContext('2d');
        var blobby = require('blobby');

        var n17 = { id: '17', label: 'ANK3' };
        var n2  = { id: '2',  label: 'CABP1' };
        var n6  = { id: '6',  label: 'CACNA1C' };
        var n4  = { id: '4',  label: 'CACNA2D4' };
        var n7  = { id: '7',  label: 'CACNB3' };
        var n23 = { id: '23', label: 'CRKL' };
        var n18 = { id: '18', label: 'CNTN1' };
        var n26 = { id: '26', label: 'FADD' };
        var n25 = { id: '25', label: 'FAS' };
        var n16 = { id: '16', label: 'GNB1' };
        var n22 = { id: '22', label: 'HOOK1' };
        var n11 = { id: '11', label: 'KCNC1' };
        var n9  = { id: '9',  label: 'KCNC2' };
        var n1  = { id: '1',  label: 'PCBD1' };
        var n21 = { id: '21', label: 'PIK3R1' };
        var n20 = { id: '20', label: 'PPM1A' };
        var n15 = { id: '15', label: 'PRKACA' };
        var n8  = { id: '8',  label: 'RIMS1' };
        var n5  = { id: '5',  label: 'RYR2' };
        var n19 = { id: '19', label: 'SBTBN4' };
        var n14 = { id: '14', label: 'SCN1B' };
        var n10 = { id: '10', label: 'SCN2A' };
        var n12 = { id: '12', label: 'SCNN1B' };
        var n24 = { id: '24', label: 'SMAD2' };
        var n27 = { id: '27', label: 'SMAD3' };
        var n3  = { id: '3',  label: 'SRI' };

        var nodes = [n1,n2,n3,n4,n5,n6,n7,n8,n9,n10,n11,n12,n14,n15,n16,n17,n18,n19,n20,n21,n22,n23,n24,n25,n26,n27];

        var arcs = [
          { id: '1', label: '', src: n6, tgt: n1 },
          { id: '2', label: '', src: n6, tgt: n2},
          { id: '3', label: '', src: n6, tgt: n3},
          { id: '4', label: '', src: n6, tgt: n4},
          { id: '5', label: '', src: n6, tgt: n5},
          { id: '6', label: '', src: n6, tgt: n7},
          { id: '7', label: '', src: n6, tgt: n8},
          { id: '8', label: '', src: n6, tgt: n15},
          { id: '9', label: '', src: n6, tgt: n16},
          { id: '10', label: '', src: n6, tgt: n20},
          { id: '11', label: '', src: n17, tgt: n9},
          { id: '12', label: '', src: n17, tgt: n10},
          { id: '13', label: '', src: n17, tgt: n11},
          { id: '14', label: '', src: n17, tgt: n12},
          { id: '15', label: '', src: n17, tgt: n14},
          { id: '16', label: '', src: n17, tgt: n18},
          { id: '17', label: '', src: n17, tgt: n19},
          { id: '18', label: '', src: n17, tgt: n22},
          { id: '19', label: '', src: n17, tgt: n26},
          { id: '20', label: '', src: n17, tgt: n25},
          { id: '21', label: '', src: n17, tgt: n27},
          { id: '22', label: '', src: n17, tgt: n24},
          { id: '23', label: '', src: n17, tgt: n23},
          { id: '24', label: '', src: n17, tgt: n21},
          { id: '25', label: '', src: n23, tgt: n21},
          { id: '26', label: '', src: n24, tgt: n27},
          { id: '27', label: '', src: n25, tgt: n26},
          { id: '28', label: '', src: n20, tgt: n21},
          { id: '29', label: '', src: n5, tgt: n15},
          { id: '30', label: '', src: n3, tgt: n5},
          { id: '31', label: '', src: n4, tgt: n7},
          { id: '32', label: '', src: n14, tgt: n18},
          { id: '33', label: '', src: n12, tgt: n18}
        ];

        var h1 = { id: '1', nodes: [n2,n3,n5,n6,n15], label: 'Calcium' }; //5
        var h2 = { id: '2', nodes: [n4,n5,n6,n7,n9,n10,n11,n12,n14], label: 'Metal Ion Transport' }; //9
        var h3 = { id: '3', nodes: [n4,n6,n7,n9,n11,n10,n14], label: 'Voltage-Gated Ion Channel Activity' };//7
        var h4 = { id: '4', nodes: [n6,n7,n10,n12,n14,n16,n17], label: 'Ion channel gating' }; //7
        var h5 = { id: '5', nodes: [n8,n10,n14,n18,n19], label: 'Nerve Tissue Proteins' }; //5
        var h6 = { id: '6', nodes: [n6,n12,n15,n16,n17,n18,n21], label: 'Rats' }; //7
        var h7 = { id: '7', nodes: [n15,n20,n21,n23,n24,n27], label: 'Phosphorylation' }; //6
        var h8 = { id: '8', nodes: [n15,n16,n20,n21,n23,n24,n25,n26,n27], label: 'Signal Transduction' }; //9
        var h9 = { id: '9', nodes: [n21,n24,n25,n26,n27], label: 'Intercellular Signaling Peptides and Proteins' }; //5

        var hyperedges = [h8,h2,h3,h4,h6,h7,h9,h5,h1];

        var gph = blobby.createGraph(nodes, hyperedges,arcs);

        var scale = 69;
        var nodepos = {
          '1': { x: 4.5*scale,   y: 2.5*scale },
          '2': { x: 3.375*scale, y: 3*scale },
          '3': { x: 2.75*scale,  y: 3.125*scale    },
          '4': { x: 7.1875*scale, y: 3.25*scale },
          '5': { x: 2.125*scale, y: 4.35*scale },
          '6': { x: 4.5*scale,   y: 4.75*scale },
          '7': { x: 7.25*scale,  y: 4.5*scale },
          '8': { x: 9.25*scale,  y: 6*scale },
          '9': { x: 6.25*scale,  y: 3.25*scale },
          '10': { x: 9.375*scale, y: 3.25*scale },
          '11': { x: 5.25*scale, y: 3.125*scale },
          '12': { x: 6.125*scale, y: 5.75*scale },
          '14': { x: 9.5*scale,  y: 4.5*scale },
          '15': { x: 2.5*scale,  y: 5.55*scale },
          '16': { x: 4.5*scale, y: 6*scale },
          '17': { x: 5.75*scale, y: 7*scale },
          '18': { x: 7.1875*scale, y: 7.125*scale },
          '19': { x: 7.5*scale, y: 8.25*scale },
          '20': { x: 1.825*scale, y: 7*scale },
          '21': { x: 3.275*scale, y: 7.125*scale },
          '22': { x: 7*scale, y: 8.875*scale },
          '23': { x: 2.5*scale, y: 8.5*scale },
          '24': { x: 3.75*scale, y: 9*scale },
          '25': { x: 5.25*scale, y: 9.35*scale },
          '26': { x: 6.1875*scale, y: 9.25*scale },
          '27': { x: 4.25*scale, y: 9.5*scale }
        };

        var padSize = 20;
        var gphLayout = blobby.createLayout(gph,nodepos,padSize);

        var edgestyles = {
          '1': { padSize: 20,
            fillColor: "rgba(127,3,101,0.6)",
            strokeColor: "rgb(200,200,200)",
            strokeWidth: 1
          },
          '2': { padSize: 20,
            fillColor: "rgba(64,128,0,0.6)",
            strokeColor: "rgb(200,200,200)",
            strokeWidth: 1
          },
          '3': { padSize: 20,
            fillColor: "rgba(5,128,72,0.6)",
            strokeColor: "rgb(200,200,200)",
            strokeWidth: 1
          },
          '4': { padSize: 20,
            fillColor: "rgba(84,4,127,0.6)",
            strokeColor: "rgb(200,200,200)",
            strokeWidth: 1
          },
          '5': { padSize: 20,
            fillColor: "rgba(127,1,87,0.6)",
            strokeColor: "rgb(200,200,200)",
            strokeWidth: 1
          },
          '6': { padSize: 20,
            fillColor: "rgba(123,38,127,0.6)",
            strokeColor: "rgb(200,200,200)",
            strokeWidth: 1
          },
          '7': { padSize: 20,
            fillColor: "rgba(127,0,127,0.6)",
            strokeColor: "rgb(200,200,200)",
            strokeWidth: 1
          },
          '8': { padSize: 20,
            fillColor: "rgba(127,0,127,0.6)",
            strokeColor: "rgb(200,200,200)",
            strokeWidth: 1
          },
          '9': { padSize: 20,
            fillColor: "rgba(127,0,127,0.6)",
            strokeColor: "rgb(200,200,200)",
            strokeWidth: 1
          }
        };

        var defNodeStyle = { size: 5,
                             fillColor: "white",
                             strokeColor: "white",
                             strokeWidth: 1
                           };
        var nodestyles = {};
        gph.nodes.forEach(function (n) {
          nodestyles[n.id] = defNodeStyle;
        });

        var defArcStyle = { strokeColor: "gold", strokeWidth: 1 };
        var arcstyles = {};
        gph.arcs.forEach(function(a) {
          arcstyles[a.id] = defArcStyle;
        });

        var styles = blobby.createStyleMap(nodestyles,edgestyles,arcstyles);
        blobby.drawHypergraph(ctx,gph,gphLayout,styles);
      }
    }
    </script>
    <style type="text/css">
      canvas { border: 1px solid black; }
    </style>
  </head>
  <body onload="draw();">
    <canvas id="thegraph" width="900" height="900"></canvas>
  </body>
</html>
